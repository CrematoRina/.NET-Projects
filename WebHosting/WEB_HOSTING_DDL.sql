CREATE TABLE Zaposleni(
Ime_Oca         varchar(15),
radni_staz         integer,
jmbg         integer,
Ime         varchar(15),
Prezime         varchar(15),
Godina_rodjenja         date,
Datum_zaposlenja         date
);

ALTER TABLE Zaposleni ADD PRIMARY KEY(jmbg);

CREATE TABLE Odredjeno(
Istek_ugovora         date,
jmbg         integer
);

ALTER TABLE Odredjeno ADD PRIMARY KEY(jmbg);

ALTER TABLE Odredjeno ADD CONSTRAINT jmbg_o FOREIGN KEY(jmbg) REFERENCES Zaposleni(jmbg);

CREATE TABLE Neodredjeno(
jmbg         integer
);

ALTER TABLE Neodredjeno ADD PRIMARY KEY(jmbg);

ALTER TABLE Neodredjeno ADD CONSTRAINT jmbg_n FOREIGN KEY(jmbg) REFERENCES Zaposleni(jmbg);

CREATE TABLE Tehnicka_struka(
jmbg         integer
);

ALTER TABLE Tehnicka_struka ADD PRIMARY KEY(jmbg);

ALTER TABLE Tehnicka_struka ADD CONSTRAINT jmbg_t FOREIGN KEY(jmbg) REFERENCES Neodredjeno(jmbg);

CREATE TABLE Administrator(
Operativni_sistem         varchar(15),
jmbg         integer
);

ALTER TABLE Administrator ADD PRIMARY KEY(jmbg);

ALTER TABLE Administrator ADD CONSTRAINT jmbg_a FOREIGN KEY(jmbg) REFERENCES Tehnicka_struka(jmbg);

CREATE TABLE Programer(
Programski_jezik         varchar(15),
jmbg         integer
);

ALTER TABLE Programer ADD PRIMARY KEY(jmbg);

ALTER TABLE Programer ADD CONSTRAINT jmbg_p FOREIGN KEY(jmbg) REFERENCES Tehnicka_struka(jmbg);

CREATE TABLE Ekonomista(
Stepen_strucne_spreme         varchar(15),
ID_ek         integer,
jmbg         integer
);

ALTER TABLE Ekonomista ADD PRIMARY KEY(jmbg);

ALTER TABLE Ekonomista ADD CONSTRAINT jmbg_e FOREIGN KEY(jmbg) REFERENCES Odredjeno(jmbg);

ALTER TABLE Ekonomista ADD CONSTRAINT ID_ek_FK FOREIGN KEY(ID_ek) REFERENCES Tehnicka_podrska(ID_kontakt);

CREATE TABLE Narudzbina(
ID_narudzbine         integer,
Trajanje         date,
Datum_kupovine         date,
ID_paket         integer
);

ALTER TABLE Narudzbina ADD PRIMARY KEY(ID_narudzbine);

ALTER TABLE Narudzbina ADD CONSTRAINT ID_paket_FK FOREIGN KEY(ID_paket) REFERENCES Paketi(ID_paketa);


CREATE TABLE Paketi(
Cena         number,
Prostor         integer,
ID_paketa         integer
);

ALTER TABLE Paketi ADD PRIMARY KEY(ID_paketa);

CREATE TABLE Serverski(
ID_paketa         integer
);

ALTER TABLE Serverski ADD PRIMARY KEY(ID_paketa);

ALTER TABLE Serverski ADD CONSTRAINT ID_paketa_s FOREIGN KEY(ID_paketa) REFERENCES Paketi(ID_paketa);

CREATE TABLE Static(
ID_paketa         integer
);

ALTER TABLE Static ADD PRIMARY KEY(ID_paketa);

ALTER TABLE Static ADD CONSTRAINT ID_paketa_st FOREIGN KEY(ID_paketa) REFERENCES Paketi(ID_paketa);

CREATE TABLE Script(
Scripting_jezik         varchar(15),
ID_paketa         integer
);

ALTER TABLE Script ADD PRIMARY KEY(ID_paketa);

ALTER TABLE Script ADD CONSTRAINT ID_paketa_sc FOREIGN KEY(ID_paketa) REFERENCES Paketi(ID_paketa);

CREATE TABLE Baza(
DBMS         varchar(15),
ID_paketa         integer
);

ALTER TABLE Baza ADD PRIMARY KEY(ID_paketa);

ALTER TABLE Baza ADD CONSTRAINT ID_paketa_b FOREIGN KEY(ID_paketa) REFERENCES Paketi(ID_paketa);

CREATE TABLE Server(
IP         varchar(15)
);

ALTER TABLE Server ADD PRIMARY KEY(IP);

CREATE TABLE Windows(
IP         varchar(15)
);

ALTER TABLE Windows ADD PRIMARY KEY(IP);

ALTER TABLE Windows ADD CONSTRAINT IP_w FOREIGN KEY(IP) REFERENCES Server(IP);

CREATE TABLE Linux(
IP         varchar(15)
);

ALTER TABLE Linux ADD PRIMARY KEY(IP);

ALTER TABLE Linux ADD CONSTRAINT IP_l FOREIGN KEY(IP) REFERENCES Server(IP);

CREATE TABLE Kontakt_osoba(
PrezimeO         varchar(15),
Telefon         integer,
ImeO         varchar(15),
ID_Osobe         integer
);

ALTER TABLE Kontakt_osoba ADD PRIMARY KEY(ID_Osobe);

CREATE TABLE Korisnici(
Adresa         varchar(15),
Osoba         integer,
ID         integer
);

ALTER TABLE Korisnici ADD PRIMARY KEY(ID);

ALTER TABLE Korisnici ADD CONSTRAINT osoba_FK FOREIGN KEY(Osoba) REFERENCES Kontakt_osoba(ID_Osobe);

CREATE TABLE Fizicka(
PrezimeK         varchar(15),
ImeK         varchar(15),
JMBGK         varchar(15),
ID         integer
);

ALTER TABLE Fizicka ADD PRIMARY KEY(ID);

ALTER TABLE Fizicka ADD CONSTRAINT ID_f FOREIGN KEY(ID) REFERENCES Korisnici(ID);

CREATE TABLE Pravna(
Naziv         varchar(15),
PIB         varchar(15),
ID         integer
);

ALTER TABLE Pravna ADD PRIMARY KEY(ID);

ALTER TABLE Pravna ADD CONSTRAINT ID_pp FOREIGN KEY(ID) REFERENCES Korisnici(ID);

CREATE TABLE Tehnicka_podrska(
Telefon         integer,
PrezimeO         varchar(15),
ImeO         varchar(15),
ID_kontakt         integer
);

ALTER TABLE Tehnicka_podrska ADD PRIMARY KEY(ID_kontakt);

CREATE TABLE Prima(
ID_narudzbine_ekonomista         integer,
jmbg_ekonomista         integer
);

ALTER TABLE Prima ADD PRIMARY KEY(ID_narudzbine_ekonomista , jmbg_ekonomista);

ALTER TABLE Prima ADD CONSTRAINT ID_narudzbine_ekonomista_FK FOREIGN KEY(ID_narudzbine_ekonomista) REFERENCES Narudzbina(ID_narudzbine);

ALTER TABLE Prima ADD CONSTRAINT jmbg_ekonomista_FK FOREIGN KEY(jmbg_ekonomista) REFERENCES Ekonomista(jmbg);

CREATE TABLE Hostuje(
ID_paketa_static         integer,
IP_windows         varchar(15)
);
ALTER TABLE Hostuje ADD PRIMARY KEY(ID_paketa_static , IP_windows);
ALTER TABLE Hostuje ADD CONSTRAINT ID_paketa_static_fk FOREIGN KEY(ID_paketa_static) REFERENCES Static(ID_paketa);
ALTER TABLE Hostuje ADD CONSTRAINT IP_windows_FK FOREIGN KEY(IP_windows) REFERENCES Windows(IP);

CREATE TABLE Narucio(
ID_narudzbine_korisnika         integer,
ID_korisnika         integer
);

ALTER TABLE Narucio ADD PRIMARY KEY(ID_narudzbine_korisnika, ID_korisnika);
ALTER TABLE Narucio ADD CONSTRAINT ID_narudzbine_korisnika_FK FOREIGN KEY(ID_narudzbine_korisnika) REFERENCES Narudzbina(ID_narudzbine);
ALTER TABLE Narucio ADD CONSTRAINT ID_korisnika_FK FOREIGN KEY(ID_korisnika) REFERENCES Korisnici(ID);


CREATE TABLE Odrzava(
ID_paketa_admin         integer,
jmbg_admin        integer
);

ALTER TABLE Odrzava ADD PRIMARY KEY(ID_paketa_admin , jmbg_admin );

ALTER TABLE Odrzava ADD CONSTRAINT ID_paketa_admin_FK FOREIGN KEY(ID_paketa_admin) REFERENCES Static(ID_paketa);

ALTER TABLE Odrzava ADD CONSTRAINT jmbg_admin_FK FOREIGN KEY(jmbg_admin) REFERENCES Administrator(jmbg);

CREATE TABLE Programira(
jmbg         integer,
ID_paketa_b       integer,
ID_paketa_s       integer
);

ALTER TABLE Programira ADD PRIMARY KEY(jmbg , ID_paketa_b , ID_paketa_s);

ALTER TABLE Programira ADD CONSTRAINT jmbg_FK FOREIGN KEY(jmbg) REFERENCES Programer(jmbg);

ALTER TABLE Programira ADD CONSTRAINT ID_paketa_s_FK FOREIGN KEY(ID_paketa_s) REFERENCES Script(ID_paketa);

ALTER TABLE Programira ADD CONSTRAINT ID_paketa_b_FK FOREIGN KEY(ID_paketa_b) REFERENCES Baza(ID_paketa);





CREATE SEQUENCE  "ID_Osobe_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;

CREATE SEQUENCE  "Korisnici_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;

CREATE SEQUENCE  "ID_paketa_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;

CREATE SEQUENCE  "Narudzbina_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Radoljub', '3', '1705993738511', 'Ivana', 'Jovanovic', to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Jovica', '5', '1602993733514', 'Milos', 'Aksentijevic', to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Nobojsa', '2', '0301993733520', 'Nikola', 'Stevanovic',to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Milosav', '10', '0301993733230', 'Slobodanka', 'Jovanovic', to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Stevan', '15', '0301955733230', 'Nebojsa', 'Stevanovic', to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Vlastimir', '20', '0301923733230', 'Jovica', 'Aksentijevic',to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Miodrag', '6', '0301992233230', 'Sladjana', 'Prelic', to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ZAPOSLENI" (IME_OCA, RADNI_STAZ, JMBG, IME, PREZIME, GODINA_RODJENJA, DATUM_ZAPOSLENJA) VALUES ('Katica', '1', '0301993754890', 'Jerina', 'Zlatanovic', to_date('01.01.01', 'DD.MM.YY'),to_date('01.01.01', 'DD.MM.YY'));

INSERT INTO "ODREDJENO" (ISTEK_UGOVORA, JMBG) VALUES (to_date('10-10-20', 'DD.MM.YY'),'0301993754890');
INSERT INTO "ODREDJENO" (ISTEK_UGOVORA, JMBG) VALUES (to_date('10-10-20', 'DD.MM.YY'),'0301993733520');

INSERT INTO "NEODREDJENO" (JMBG) VALUES ('1602993733514');
INSERT INTO "NEODREDJENO" (JMBG) VALUES ('0301993733230');
INSERT INTO "NEODREDJENO" (JMBG) VALUES ('0301993754890');

INSERT INTO "EKONOMISTA" (STEPEN_STRUCNE_SPREME,ID_EK,JMBG) VALUES ('5','1','0301993754890');
INSERT INTO "EKONOMISTA" (STEPEN_STRUCNE_SPREME,ID_EK,JMBG) VALUES ('4','2','0301993733520');

INSERT INTO "TEHNICKA_PODRSKA" (ID_KONTAKT) VALUES ('1');
INSERT INTO "TEHNICKA_PODRSKA" (ID_KONTAKT) VALUES ('2');

INSERT INTO "TEHNICKA_STRUKA" (JMBG) VALUES('1602993733514');
INSERT INTO "TEHNICKA_STRUKA" (JMBG) VALUES('0301993733230');
INSERT INTO "TEHNICKA_STRUKA" (JMBG) VALUES('0301993754890');

INSERT INTO "ADMINISTRATOR" (OPERATIVNI_SISTEM,JMBG) VALUES ('Windows','1602993733514');

INSERT INTO "PROGRAMER" (PROGRAMSKI_JEZIK,JMBG) VALUES ('C++','0301993733230');
INSERT INTO "PROGRAMER" (PROGRAMSKI_JEZIK,JMBG) VALUES ('JavaScript','0301993754890');

INSERT INTO "PAKETI" (CENA,ID_PAKETA,PROSTOR) VALUES ('1000','1','20');
INSERT INTO "PAKETI" (CENA,ID_PAKETA,PROSTOR) VALUES ('2000','2','30');
INSERT INTO "PAKETI" (CENA,ID_PAKETA,PROSTOR) VALUES ('3000','3','40');
INSERT INTO "PAKETI" (CENA,ID_PAKETA,PROSTOR) VALUES ('4000','4','50');

INSERT INTO "SERVERSKI" (ID_PAKETA) VALUES ('3');
INSERT INTO "STATIC" (ID_PAKETA) VALUES ('4');
INSERT INTO "SCRIPT" (ID_PAKETA,SCRIPTING_JEZIK) VALUES ('4','JavaScript');
INSERT INTO "BAZA" (ID_PAKETA,DBMS) VALUES ('1','Oracle');

INSERT INTO "SERVER" (IP) VALUES ('192.168.1.1');
INSERT INTO "SERVER" (IP) VALUES ('192.168.2.1');

INSERT INTO "WINDOWS" (IP) VALUES('192.168.1.1');
INSERT INTO "LINUX" (IP) VALUES('192.168.2.1');

INSERT INTO "KONTAKT_OSOBA" (ID_OSOBE,IMEO,PREZIMEO,TELEFON) VALUES ('1','Milos','Aksentijevic','0645635544');
INSERT INTO "KONTAKT_OSOBA" (ID_OSOBE,IMEO,PREZIMEO,TELEFON) VALUES ('2','Nikola','Stevanovic','0645215478');
INSERT INTO "KONTAKT_OSOBA" (ID_OSOBE,IMEO,PREZIMEO,TELEFON) VALUES ('3','Ivana','Jovanovic','0641231547');

INSERT INTO "KORISNICI" (ADRESA,OSOBA,ID) VALUES ('Prokuplje 5','1','1');
INSERT INTO "KORISNICI" (ADRESA,OSOBA,ID) VALUES ('Bulevar Nis','2','2');
INSERT INTO "KORISNICI" (ADRESA,OSOBA,ID) VALUES ('BB Madjare','3','3');

INSERT INTO "FIZICKA" (PREZIMEK,IMEK,JMBGK,ID) VALUES ('Djuric','Djurica','154698795165','1');
INSERT INTO "FIZICKA" (PREZIMEK,IMEK,JMBGK,ID) VALUES ('Nemanjic','Nemanja','548499876545','2');

INSERT INTO "PRAVNA" (PIB,NAZIV,ID) VALUES ('15645','Leoni','3');

INSERT INTO "NARUDZBINA" (DATUM_KUPOVINE,ID_NARUDZBINE,TRAJANJE,ID_PAKET) VALUES (to_date('10-10-20', 'DD.MM.YY'),'1',to_date('10-10-20', 'DD.MM.YY'),'1');
INSERT INTO "NARUDZBINA" (DATUM_KUPOVINE,ID_NARUDZBINE,TRAJANJE,ID_PAKET) VALUES (to_date('10-10-20', 'DD.MM.YY'),'2',to_date('10-10-20', 'DD.MM.YY'),'2');
INSERT INTO "NARUDZBINA" (DATUM_KUPOVINE,ID_NARUDZBINE,TRAJANJE,ID_PAKET) VALUES (to_date('10-10-20', 'DD.MM.YY'),'3',to_date('10-10-20', 'DD.MM.YY'),'4');

INSERT INTO "PRIMA" (ID_NARUDZBINE_EKONOMISTA,JMBG_EKONOMISTA) VALUES ('1','0301993754890');
INSERT INTO "PRIMA" (ID_NARUDZBINE_EKONOMISTA,JMBG_EKONOMISTA) VALUES ('2','0301993754890');
INSERT INTO "PRIMA" (ID_NARUDZBINE_EKONOMISTA,JMBG_EKONOMISTA) VALUES ('3','0301993733520');

INSERT INTO "NARUCIO" (ID_KORISNIKA,ID_NARUDZBINE_KORISNIKA) VALUES ('1','1');
INSERT INTO "NARUCIO" (ID_KORISNIKA,ID_NARUDZBINE_KORISNIKA) VALUES ('2','2');
INSERT INTO "NARUCIO" (ID_KORISNIKA,ID_NARUDZBINE_KORISNIKA) VALUES ('3','3');

INSERT INTO "ODRZAVA" (ID_PAKETA_ADMIN,JMBG_ADMIN) VALUES ('4','1602993733514');

INSERT INTO "PROGRAMIRA" (ID_PAKETA_B,ID_PAKETA_S,JMBG) VALUES ('1','4','0301993733230');
INSERT INTO "PROGRAMIRA" (ID_PAKETA_B,ID_PAKETA_S,JMBG) VALUES ('1','4','0301993754890');

INSERT INTO "HOSTUJE" (ID_PAKETA_STATIC,IP_WINDOWS) VALUES ('4','192.168.1.1');


  CREATE OR REPLACE TRIGGER "ID_OSOBE_TRIGGER_PK" 
    BEFORE INSERT
    ON KONTAKT_OSOBA
    REFERENCING NEW AS NEW
    FOR EACH ROW
BEGIN
    SELECT ID_Osobe_SEQ.NEXTVAL INTO :NEW.ID_OSOBE FROM DUAL;
END; 
/
ALTER TRIGGER "ID_OSOBE_TRIGGER_PK" ENABLE;

  CREATE OR REPLACE TRIGGER "ID_KORISNICI_TRIGGER_PK" 
    BEFORE INSERT
    ON KORISNICI
    REFERENCING NEW AS NEW
    FOR EACH ROW
BEGIN
    SELECT Korisnici_ID_SEQ.NEXTVAL INTO :NEW.ID FROM DUAL;
END; 
/
ALTER TRIGGER "ID_KORISNICI_TRIGGER_PK" ENABLE;

  CREATE OR REPLACE TRIGGER "ID_PAKETA_TRIGGER_PK" 
    BEFORE INSERT
    ON PAKETI
    REFERENCING NEW AS NEW
    FOR EACH ROW
BEGIN
    SELECT ID_paketa_SEQ.NEXTVAL INTO :NEW.ID_PAKETA FROM DUAL;
END; 
/
ALTER TRIGGER "ID_PAKETA_TRIGGER_PK" ENABLE;

  CREATE OR REPLACE TRIGGER "ID_NARUDZBINE_TRIGGER_PK" 
    BEFORE INSERT
    ON NARUDZBINA
    REFERENCING NEW AS NEW
    FOR EACH ROW
BEGIN
    SELECT Narudzbina_ID_SEQ.NEXTVAL INTO :NEW.ID_NARUDZBINE FROM DUAL;
END; 
/
ALTER TRIGGER "ID_NARUDZBINA_TRIGGER_PK" ENABLE;










































